<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.onload = function () {
            var gameStatus = document.getElementById("gameStatus");
            var images = document.getElementsByTagName("img");
            var resetButton = document.getElementById("resetButton");

            var getMagicCup = () => { return images[Math.floor(Math.random() * images.length)]; };

            var magicCup = getMagicCup();

            var imgClickHandler = function() {
                if (this === magicCup) {
                    winGame();
                } else {
                    updateStatus("Nope, try again.");
                }
            };

            var resetGame = function() {
                // for (var image of images) {
                //     image.setAttribute("src", "https://www.cater4you.co.uk/acatalog/red-plastic-party-cup-upside-1000.jpg");
                //     image.addEventListener("click", imgClickHandler, false);
                // }

                Array.from(images).forEach(image => {
                    image.setAttribute("src", "https://www.cater4you.co.uk/acatalog/red-plastic-party-cup-upside-1000.jpg");
                    image.addEventListener("click", imgClickHandler, false);
                });

                updateStatus("");
                magicCup = getMagicCup();
            };

            resetButton.addEventListener("click", resetGame, false);

            resetGame();

            function winGame() {
                magicCup.setAttribute("src", "https://www.what-dog.net/Images/faces2/scroll0015.jpg");
                updateStatus("You win!");

                for (var image of images) {
                    image.removeEventListener("click", imgClickHandler);
                }
            }

            function updateStatus(value) {
                gameStatus.innerHTML = value;
            }
        }
    </script>
    <title>Document</title>
</head>
<body>
    <div align="center">
        <img id="cup1" src="https://www.cater4you.co.uk/acatalog/red-plastic-party-cup-upside-1000.jpg" height=100 width=100 />
        <img id="cup2" src="https://www.cater4you.co.uk/acatalog/red-plastic-party-cup-upside-1000.jpg" height=100 width=100 />
        <img id="cup3" src="https://www.cater4you.co.uk/acatalog/red-plastic-party-cup-upside-1000.jpg" height=100 width=100 />
        <p id="gameStatus"></p>
        <button id="resetButton">Reset</button>
    </div>
</body>
</html>